/*!
 * BackBlur.js v1.0.0-dev
 * 
 * Copyright 2017 Alexis Cheron
 * Licensed under MIT (https://github.com/Norech/BackBlur.js/blob/master/LICENSE)
 */
"use strict";var BackBlur=function(){var t=function(){function t(){}return t.getAllBySelector=function(e){return t.arrayOf(document.querySelectorAll(e))},t.getBySelector=function(t){return document.querySelector(t)},t.arrayOf=function(t){return Array.prototype.slice.call(t)},t.isValidColor=function(t){return/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/.test(t)},t.isValidCSSClassName=function(t){return/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*\s*$/.test(t)},t.addEvent=function(t,e,o){null!=t&&void 0!==t&&(t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o)},t.checkSettings=function(t,e){if(void 0===t&&(t={}),"object"!=typeof t)throw new TypeError("BackBlur - The settings argument must be an object.");return Object.keys(e).forEach(function(o){void 0!==t[o]&&(e[o]=t[o])}),e},t}();return function(){function e(e){if(this.settings=[],this.elements=[],this.tmpName="",this.settings=t.checkSettings(e,{selector:".backblur",background_color:"rgba(255, 255, 255, 0.65)",apply_zindex:!0,blur_radius:15,tmp_prefix:"__BACKBLUR",cache:!0}),!t.isValidCSSClassName(this.settings.tmp_prefix||""))throw new Error('BackBlur - "'+this.settings.tmp_prefix+'" is not a valid name.');this.tmpName=this.settings.tmp_prefix+"_"+Math.floor(9999999*Math.random()),t.addEvent(window,"resize",this.update),this.update()}return e.prototype.getElements=function(){var e=this.settings.selector,o=t.getAllBySelector;return"string"==typeof e?this.settings.cache?(0==this.elements.length&&(this.elements=o(e)),this.elements):o(e):"[object Array]"===Object.prototype.toString.call(e)?e:[e]},e.prototype.clearCache=function(){1==this.settings.cache&&(this.elements=[])},e.prototype.update=function(){this.clear(),this.draw()},e.prototype.clear=function(){t.getAllBySelector("*[class*='"+this.tmpName+"_']").forEach(function(t){null!=t.parentNode&&t.parentNode.removeChild(t)})},e.prototype.draw=function(){var e=this,o="",r=this.getElements(),n=this.settings;r.forEach(function(r){var i;if(null!=(i=r.hasAttribute("data-backblur-parent")?t.getBySelector(r.getAttribute("data-backblur-parent")):r.parentElement)){var a="",s="",c=e.tmpName+"_"+Math.floor(9999999*Math.random()),l=document.defaultView.getComputedStyle(i,void 0),u=parseFloat(n.blur_radius.toString());if(r.className+=" "+c,s+='content: "";',n.apply_zindex&&(s+="z-index: 0;"),s+="filter: blur("+u+"px);",s+="position: absolute;",s+="top: "+(i.offsetTop-r.offsetTop)+"px;",s+="left: "+(i.offsetLeft-r.offsetLeft)+"px;",s+="right: "+(r.offsetLeft+r.offsetWidth-(i.offsetLeft+i.offsetWidth))+"px;",s+="bottom: "+(r.offsetTop+r.offsetHeight-(i.offsetTop+i.offsetHeight))+"px;",["background-image","background-position","background-size","background-repeat","background-attachment","background-origin","background-clip","background-color"].forEach(function(t){s+=t+": "+l.getPropertyValue(t)+";"}),!t.isValidColor(n.background_color))throw new Error('BackBlur - "'+n.background_color+'" is not a valid color.');a+="content: '';",n.apply_zindex&&(a+="z-index: 0;"),a+="background: "+n.background_color+";",a+="position: absolute;",a+="left: 0px;",a+="top: 0px;",a+="bottom: 0px;",o+="."+c+"::before{"+s+"}",o+="."+c+"::after{"+(a+="right: 0px;")+"}",n.apply_zindex&&(o+="."+c+" *{position:relative;z-index:1;}")}}),document.head.insertAdjacentHTML("beforeend",'<style id="'+this.tmpName+'_STYLE">'+o+"</style>")},e}()}();